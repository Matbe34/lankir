@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {

  :root {
    /* Default (Dark) Theme - Modern darker palette */
    --bg-primary: #0f1419;
    --bg-secondary: #161b22;
    --bg-tertiary: #1c2128;
    --bg-elevated: #21262d;
    --text-primary: #f0f6fc;
    --text-secondary: #8b949e;
    --text-tertiary: #6e7681;
    --border-color: #30363d;
    --border-subtle: #21262d;
    --hover-color: #252c35;

    /* Enhanced accent colors with better visibility */
    --accent-color: #58a6ff;
    --accent-hover: #409eff;
    --accent-active: #3a8eeb;
    --accent-subtle: rgba(88, 166, 255, 0.1);
    --accent-emphasis: rgba(88, 166, 255, 0.15);

    /* Semantic colors */
    --success-color: #3fb950;
    --warning-color: #d29922;
    --error-color: #f85149;
  }

  /* Light Theme - Modern cleaner palette */
  :root[data-theme="light"] {
    --bg-primary: #ffffff;
    --bg-secondary: #f6f8fa;
    --bg-tertiary: #eef1f5;
    --bg-elevated: #ffffff;
    --text-primary: #1f2328;
    --text-secondary: #656d76;
    --text-tertiary: #8c959f;
    --border-color: #d0d7de;
    --border-subtle: #e7ecf0;
    --hover-color: #f3f4f6;

    /* Enhanced accent colors for light theme */
    --accent-color: #0969da;
    --accent-hover: #0860ca;
    --accent-active: #0757ba;
    --accent-subtle: rgba(9, 105, 218, 0.08);
    --accent-emphasis: rgba(9, 105, 218, 0.12);

    /* Semantic colors */
    --success-color: #1a7f37;
    --warning-color: #9a6700;
    --error-color: #cf222e;
  }

  /* Auto theme detection */
  @media (prefers-color-scheme: light) {
    :root[data-theme="auto"] {
      --bg-primary: #ffffff;
      --bg-secondary: #f6f8fa;
      --bg-tertiary: #eef1f5;
      --bg-elevated: #ffffff;
      --text-primary: #1f2328;
      --text-secondary: #656d76;
      --text-tertiary: #8c959f;
      --border-color: #d0d7de;
      --border-subtle: #e7ecf0;
      --hover-color: #f3f4f6;

      --accent-color: #0969da;
      --accent-hover: #0860ca;
      --accent-active: #0757ba;
      --accent-subtle: rgba(9, 105, 218, 0.08);
      --accent-emphasis: rgba(9, 105, 218, 0.12);

      --success-color: #1a7f37;
      --warning-color: #9a6700;
      --error-color: #cf222e;
    }
  }

  @media (prefers-color-scheme: dark) {
    :root[data-theme="auto"] {
      --bg-primary: #0f1419;
      --bg-secondary: #161b22;
      --bg-tertiary: #1c2128;
      --bg-elevated: #21262d;
      --text-primary: #f0f6fc;
      --text-secondary: #8b949e;
      --text-tertiary: #6e7681;
      --border-color: #30363d;
      --border-subtle: #21262d;
      --hover-color: #252c35;

      --accent-color: #58a6ff;
      --accent-hover: #409eff;
      --accent-active: #3a8eeb;
      --accent-subtle: rgba(88, 166, 255, 0.1);
      --accent-emphasis: rgba(88, 166, 255, 0.15);

      --success-color: #3fb950;
      --warning-color: #d29922;
      --error-color: #f85149;
    }
  }

  * {
    @apply m-0 p-0 box-border;
  }

  body {
    @apply overflow-hidden bg-bg-primary text-text-primary;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
    transition: background-color 0.2s ease, color 0.2s ease;
  }
}

@layer components {
  #pdfTabsContainer.has-tabs {
    @apply min-h-10 max-h-10 opacity-100;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
  }

  .pdf-tab {
    @apply flex items-center gap-2 px-4 py-2 cursor-pointer whitespace-nowrap min-w-[150px] max-w-[250px] flex-shrink-0 transition-all;
    background: transparent;
    color: var(--text-secondary);
    border-right: 1px solid var(--border-subtle);
    border-bottom: 2px solid transparent;
  }

  .pdf-tab:hover {
    background: var(--hover-color);
    color: var(--text-primary);
    border-bottom-color: var(--text-tertiary);
  }

  .pdf-tab.active {
    background: var(--bg-primary);
    color: var(--accent-color);
    border-bottom: 2px solid var(--accent-color);
    font-weight: 600;
  }

  .pdf-tab-name {
    @apply overflow-hidden text-ellipsis text-sm flex-1;
  }

  .pdf-tab-close {
    @apply flex items-center justify-center w-5 h-5 rounded-full bg-transparent border-none text-text-secondary cursor-pointer text-base leading-none transition-all;
    @apply hover:bg-red-500 hover:bg-opacity-20 hover:text-red-500;
  }

  .pdf-tab-close:hover {
    transform: scale(1.1);
  }

  /* Sidebars */
  .left-sidebar.collapsed {
    @apply w-0 min-w-0 border-r-0 overflow-hidden;
  }

  .right-sidebar.collapsed {
    @apply w-0 min-w-0 border-l-0 overflow-hidden;
  }

  .expand-btn.hidden {
    display: none;
  }

  .tab-btn.active {
    color: var(--accent-color);
    border-bottom-color: var(--accent-color);
    font-weight: 600;
  }

  .tab-content {
    display: none;
    @apply flex-1 overflow-y-auto;
  }

  .tab-content.active {
    @apply flex flex-col;
  }

  /* Modals - Modern with elevation */
  .modal-overlay {
    @apply fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center z-[1000];
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(4px);
  }

  .modal-overlay.hidden {
    display: none;
  }

  .modal {
    @apply w-11/12 max-w-2xl max-h-[80vh] flex flex-col rounded-xl;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6),
      0 0 0 1px var(--border-subtle),
      0 0 100px rgba(88, 166, 255, 0.08);
  }

  .modal-header {
    @apply px-6 py-5 flex justify-between items-center;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    border-radius: 0.75rem 0.75rem 0 0;
  }

  .modal-header h2 {
    @apply text-xl font-bold text-text-primary;
    letter-spacing: -0.01em;
  }

  .modal-close {
    @apply bg-transparent border-none text-text-secondary text-2xl cursor-pointer p-0 w-9 h-9 flex items-center justify-center rounded-lg transition-all;
  }

  .modal-close:hover {
    background: var(--hover-color);
    color: var(--text-primary);
    transform: scale(1.05);
  }

  .modal-refresh {
    @apply bg-transparent border-none text-text-secondary cursor-pointer p-0 w-8 h-8 flex items-center justify-center rounded transition-all hover:bg-hover-color hover:text-text-primary;
  }

  .modal-refresh:active svg {
    animation: spin 0.6s ease-in-out;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }

  .modal-body {
    @apply px-6 py-6 overflow-y-auto flex-1;
  }

  .modal-footer {
    @apply px-6 py-4 border-t border-border-color flex justify-end gap-3;
  }

  /* Buttons - Modern with enhanced accents */
  .btn {
    @apply px-4 py-2.5 border border-border-color rounded-lg text-text-primary cursor-pointer text-sm font-medium flex items-center gap-2 transition-all;
    background: var(--bg-tertiary);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .btn:hover:not(:disabled) {
    background: var(--hover-color);
    border-color: var(--accent-color);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transform: translateY(-1px);
  }

  .btn:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .btn:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .btn-primary {
    background: var(--accent-color);
    border-color: var(--accent-color);
    color: #ffffff;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(88, 166, 255, 0.2);
  }

  .btn-primary:hover:not(:disabled) {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
    box-shadow: 0 4px 8px rgba(88, 166, 255, 0.3);
  }

  .btn-primary:active:not(:disabled) {
    background: var(--accent-active);
    border-color: var(--accent-active);
  }

  .btn-success {
    background: var(--success-color);
    border-color: var(--success-color);
    color: #ffffff;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(63, 185, 80, 0.2);
  }

  .btn-success:hover:not(:disabled) {
    background: #2ea043;
    border-color: #2ea043;
    box-shadow: 0 4px 8px rgba(63, 185, 80, 0.3);
  }

  .btn-success:active:not(:disabled) {
    background: #238636;
    border-color: #238636;
  }

  .btn-danger {
    background: var(--error-color);
    border-color: var(--error-color);
    color: #ffffff;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(248, 81, 73, 0.2);
  }

  .btn-danger:hover:not(:disabled) {
    background: #da3633;
    border-color: #da3633;
    box-shadow: 0 4px 8px rgba(248, 81, 73, 0.3);
  }

  .btn-danger:active:not(:disabled) {
    background: #b62324;
    border-color: #b62324;
  }

  .btn-large {
    @apply px-6 py-3 text-base;
    box-shadow: 0 4px 8px rgba(88, 166, 255, 0.25);
  }

  /* Profile Selection */
  .profile-selection-section {
    @apply mb-6 pb-6 border-b border-border-color;
  }

  .profile-selection-section label {
    @apply block mb-2 font-medium text-text-primary;
  }

  .profile-select {
    @apply w-full px-3 py-2 bg-bg-tertiary border border-border-color rounded text-text-primary text-base cursor-pointer;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%238b949e' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 12px;
    padding-right: 2.5rem;
    color: var(--text-primary);
    background-color: var(--bg-tertiary);
  }

  .profile-select:focus {
    @apply outline-none border-accent-blue;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
  }

  .profile-select option {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .profile-description {
    @apply mt-2 text-sm text-text-secondary italic;
  }

  /* Certificate Selection */
  .certificate-list {
    @apply flex flex-col gap-3;
  }

  .certificate-item {
    @apply rounded-lg p-4 cursor-pointer transition-all;
    background: var(--bg-tertiary);
    border: 1.5px solid var(--border-color);
  }

  .certificate-item:hover {
    background: var(--hover-color);
    border-color: var(--accent-color);
    box-shadow: 0 2px 8px var(--accent-subtle);
  }

  .certificate-item.selected {
    background: var(--accent-subtle);
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px var(--accent-emphasis),
      0 2px 8px var(--accent-subtle);
  }

  .certificate-item.invalid {
    @apply opacity-50 cursor-not-allowed;
  }

  .certificate-item.invalid:hover {
    @apply bg-bg-tertiary border-border-color;
  }

  .cert-header {
    @apply flex justify-between items-start mb-2;
  }

  .cert-name {
    @apply font-semibold text-base text-text-primary mb-1;
  }

  .cert-type-badge {
    @apply inline-block px-2 py-1 rounded text-xs font-medium ml-2 bg-bg-tertiary text-text-secondary border border-border-color;
  }

  .cert-type-badge.pkcs11 {
    @apply text-accent-blue border-accent-blue;
    background-color: rgba(59, 130, 246, 0.15);
  }

  .cert-type-badge.nss {
    @apply text-purple-400 border-purple-400;
    background-color: rgba(168, 85, 247, 0.15);
  }

  .cert-type-badge.file {
    @apply text-yellow-500 border-yellow-500;
    background-color: rgba(234, 179, 8, 0.15);
  }

  .cert-status {
    @apply inline-block px-2 py-1 rounded text-xs font-medium;
  }

  .cert-status.valid {
    @apply text-accent-green;
    background-color: rgba(16, 185, 129, 0.2);
  }

  .cert-status.invalid {
    @apply text-red-500;
    background-color: rgba(239, 68, 68, 0.2);
  }

  .cert-details {
    @apply text-sm text-text-secondary leading-relaxed;
  }

  .cert-detail-row {
    @apply flex gap-2 mb-1;
  }

  .cert-detail-label {
    @apply font-medium min-w-[80px];
  }

  .cert-capabilities {
    @apply flex flex-wrap gap-2 mt-2;
  }

  .cert-capability {
    @apply bg-bg-primary px-2 py-1 rounded text-xs text-text-secondary;
  }

  /* PIN Input */
  .pin-input-section {
    @apply mt-6 pt-6 border-t border-border-color;
  }

  .pin-input-section label {
    @apply block mb-2 font-medium text-text-primary;
  }

  .pin-input-section input {
    @apply w-full px-3 py-2 bg-bg-tertiary border border-border-color rounded text-text-primary text-base font-mono;
  }

  .pin-input-section input:focus {
    @apply outline-none border-accent-blue;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
  }

  /* Loading Spinner */
  .loading-spinner {
    @apply inline-block w-5 h-5 border-2 border-border-color border-t-accent-blue rounded-full;
    animation: spin 0.8s linear infinite;
  }

  /* Page Items */
  .page-item {
    @apply p-3 mb-2 rounded-lg cursor-pointer transition-all;
    background: var(--bg-tertiary);
    border: 1.5px solid transparent;
  }

  .page-item:hover {
    background: var(--hover-color);
    border-color: var(--border-color);
  }

  .page-item.active {
    background: var(--accent-subtle);
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px var(--accent-emphasis);
  }

  .page-item .page-number {
    @apply font-semibold text-sm;
  }

  /* Recent Files */
  .recent-files {
    @apply border-t border-border-color max-h-[300px] overflow-y-auto;
  }

  .recent-list {
    @apply p-2;
  }

  .recent-item {
    @apply p-2 mb-1 bg-bg-tertiary rounded cursor-pointer transition-colors text-xs;
  }

  .recent-item:hover {
    @apply bg-hover-color;
  }

  .recent-item .file-name {
    @apply font-medium mb-1 whitespace-nowrap overflow-hidden text-ellipsis;
  }

  .recent-item .file-info {
    @apply text-text-secondary text-[0.7rem];
  }

  /* Recent File Cards */
  .recent-file-card {
    @apply rounded-xl p-0 cursor-pointer transition-all text-left relative flex flex-col overflow-hidden;
    background: var(--bg-secondary);
    border: 1.5px solid var(--border-color);
  }

  .recent-file-card:hover {
    background: var(--hover-color);
    border-color: var(--accent-color);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--accent-subtle),
      0 0 0 1px var(--accent-color);
  }

  .recent-file-remove {
    @apply absolute top-2 right-2 bg-black bg-opacity-70 border border-white border-opacity-20 text-white w-6 h-6 rounded-full cursor-pointer text-xl leading-none p-0 flex items-center justify-center opacity-0 transition-all z-[2];
  }

  .recent-file-card:hover .recent-file-remove {
    @apply opacity-100;
  }

  .recent-file-remove:hover {
    @apply bg-red-500 border-red-500 text-white;
  }

  .file-thumbnail-container {
    @apply w-full bg-bg-tertiary overflow-hidden flex items-center justify-center;
    aspect-ratio: 16 / 9;
  }

  .file-thumbnail {
    @apply w-full h-full object-cover;
  }

  .file-thumbnail-loading {
    @apply text-text-secondary text-xs;
  }

  .recent-file-card .file-icon {
    @apply text-3xl text-text-secondary;
  }

  .recent-file-info {
    @apply p-3;
  }

  .recent-file-card .file-name {
    @apply font-medium text-sm mb-1 whitespace-nowrap overflow-hidden text-ellipsis;
  }

  .recent-file-card .file-info {
    @apply text-xs text-text-secondary;
  }

  /* Settings */
  .settings-modal {
    @apply max-w-4xl w-[95%] max-h-[85vh];
  }

  .settings-body {
    @apply flex min-h-[500px] overflow-hidden;
  }

  .settings-sidebar {
    @apply w-52 border-r border-border-color py-4 flex flex-col gap-1;
  }

  .settings-tab {
    @apply bg-transparent border-none px-4 py-3 text-left cursor-pointer text-sm font-medium transition-all border-l-[3px] border-transparent;
    color: var(--text-secondary);
  }

  .settings-tab:hover {
    background: var(--hover-color);
    color: var(--text-primary);
  }

  .settings-tab.active {
    color: var(--accent-color);
    border-left-color: var(--accent-color);
    background: var(--accent-subtle);
    font-weight: 600;
  }

  .settings-content {
    @apply flex-1 px-6 py-6 overflow-y-auto;
  }

  .settings-section {
    display: none;
  }

  .settings-section.active {
    @apply block;
  }

  .settings-section h3 {
    @apply text-xl mb-6 text-text-primary;
  }

  /* Settings Section Headers */
  .settings-section-title {
    @apply text-2xl font-semibold mb-2 text-text-primary;
  }

  .settings-section-description {
    @apply text-sm text-text-secondary mb-6 pb-4 border-b border-border-color;
  }

  /* Setting Groups */
  .setting-group {
    @apply mb-6;
  }

  .setting-group:last-child {
    @apply mb-0;
  }

  .setting-group label {
    @apply block text-sm font-medium text-text-primary mb-2;
  }

  /* Setting Labels */
  .setting-label {
    @apply block text-sm font-semibold text-text-primary mb-2;
  }

  .setting-label-inline {
    @apply flex items-center gap-3 text-sm font-medium text-text-primary cursor-pointer p-3 rounded-lg transition-all;
    line-height: 1.25rem;
  }

  .setting-label-inline:hover {
    @apply bg-hover-color;
  }

  .setting-label-inline span {
    @apply select-none;
    line-height: 1.25rem;
  }

  /* Setting Inputs - Modern with accent focus */
  .setting-input {
    @apply w-full max-w-md px-3 py-2.5 rounded-lg text-text-primary text-sm font-medium transition-all;
    background: var(--bg-tertiary);
    border: 1.5px solid var(--border-color);
    color: var(--text-primary);
  }

  .setting-input:focus {
    @apply outline-none;
    border-color: var(--accent-color);
    background: var(--bg-elevated);
    box-shadow: 0 0 0 3px var(--accent-subtle),
      0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .setting-input:hover:not(:focus) {
    border-color: var(--text-tertiary);
    background: var(--bg-elevated);
  }

  /* Select-specific styling */
  .setting-input[type="text"],
  .setting-input[type="number"],
  .setting-input[type="password"] {
    /* Text inputs already styled above */
  }

  select.setting-input {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%238b949e' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 12px;
    padding-right: 2.5rem;
    cursor: pointer;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  select.setting-input option {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  :root[data-theme="light"] select.setting-input {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23656d76' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  }

  :root[data-theme="light"] .profile-select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23656d76' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  }

  .setting-input-number {
    @apply max-w-32;
  }

  .setting-input-color {
    @apply max-w-24 h-10 cursor-pointer p-1;
  }

  /* Setting Input Groups */
  .setting-input-group {
    @apply flex items-center gap-2;
  }

  .setting-unit {
    @apply text-sm text-text-secondary font-medium min-w-[60px];
  }

  .setting-checkbox {
    @apply w-5 h-5 cursor-pointer flex-shrink-0 rounded transition-all;
    accent-color: var(--accent-color);
    margin-top: 0;
    margin-bottom: 0;
    vertical-align: middle;
  }

  .setting-checkbox:hover {
    transform: scale(1.05);
  }

  .setting-checkbox:focus {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
  }

  .setting-hint {
    @apply block text-xs text-text-secondary mt-2 leading-relaxed;
  }

  .setting-hint strong {
    @apply text-text-primary font-semibold;
  }

  .setting-hint code {
    @apply px-1.5 py-0.5 bg-bg-tertiary border border-border-color rounded text-accent-blue font-mono text-xs;
  }

  .setting-info-box {
    @apply p-4 bg-bg-tertiary border border-border-color rounded-md;
  }

  /* Shortcuts List - Modern cards */
  .shortcuts-list {
    @apply flex flex-col gap-3;
  }

  .shortcut-item {
    @apply flex items-center justify-between p-4 rounded-lg transition-all;
    background: var(--bg-tertiary);
    border: 1.5px solid var(--border-color);
  }

  .shortcut-item:hover {
    background: var(--hover-color);
    border-color: var(--accent-color);
    box-shadow: 0 2px 8px var(--accent-subtle);
  }

  .shortcut-item label {
    @apply mb-0 font-medium text-text-primary flex-shrink-0 min-w-[140px];
  }

  .shortcut-input {
    @apply cursor-pointer font-mono text-center bg-bg-primary min-w-[180px] max-w-[220px];
  }

  .shortcut-input:hover {
    @apply border-accent-blue bg-bg-tertiary;
  }

  .shortcut-input:focus {
    @apply cursor-text;
  }

  /* Signature Profiles List */
  .signature-profiles-list {
    @apply flex flex-col gap-3 max-h-96 overflow-y-auto p-2 bg-bg-secondary rounded-md border border-border-color;
  }

  .profile-list-item {
    @apply flex justify-between items-center p-4 rounded-lg transition-all;
    background: var(--bg-tertiary);
    border: 1.5px solid var(--border-color);
  }

  .profile-list-item:hover {
    background: var(--hover-color);
    border-color: var(--accent-color);
    box-shadow: 0 2px 8px var(--accent-subtle);
  }

  .profile-info {
    @apply flex-1 min-w-0;
  }

  .profile-name {
    @apply font-semibold text-base text-text-primary mb-2 flex items-center gap-2 flex-wrap;
  }

  .profile-details {
    @apply flex items-center gap-3 flex-wrap;
  }

  .profile-description {
    @apply text-sm text-text-secondary;
  }

  .profile-visibility {
    @apply inline-flex items-center px-2 py-1 rounded text-xs font-medium uppercase tracking-wide;
  }

  .profile-visibility.visible {
    @apply text-blue-400;
    background-color: rgba(59, 130, 246, 0.2);
  }

  .profile-visibility.invisible {
    @apply text-text-secondary;
    background-color: rgba(139, 148, 158, 0.2);
  }

  .profile-default-badge {
    @apply inline-flex items-center px-2 py-1 rounded text-accent-green text-xs font-medium uppercase tracking-wide;
    background-color: rgba(16, 185, 129, 0.2);
  }

  .profile-builtin-badge {
    @apply inline-flex items-center px-2 py-1 rounded text-text-secondary text-xs font-medium;
    background-color: rgba(139, 148, 158, 0.2);
  }

  .profile-actions {
    @apply flex gap-2 items-center;
  }

  .btn-small {
    @apply px-3 py-2 text-xs;
  }

  .btn-icon {
    @apply px-2 py-1 rounded-md text-xs min-w-[22px] font-medium transition-all;
    background: var(--bg-primary);
    border: 1.5px solid var(--border-color);
    color: var(--text-primary);
  }

  .btn-icon:hover:not(:disabled) {
    background: var(--bg-tertiary);
    border-color: var(--accent-color);
    color: var(--accent-color);
  }

  .btn-icon:active:not(:disabled) {
    background: var(--hover-color);
  }

  .zoom-input {
    @apply w-[45px] px-2 py-1 rounded-md text-center text-xs font-medium transition-all;
    background: var(--bg-primary);
    border: 1.5px solid var(--border-color);
    color: var(--text-primary);
  }

  .zoom-input:focus {
    @apply outline-none;
    border-color: var(--accent-color);
    background: var(--bg-tertiary);
    box-shadow: 0 0 0 2px var(--accent-subtle);
  }

  .zoom-input:hover:not(:focus) {
    border-color: var(--text-tertiary);
  }

  /* Profile Editor */
  .profile-editor-container {
    @apply grid grid-cols-2 gap-8 max-h-[70vh] overflow-hidden;
  }

  .profile-editor-form {
    @apply overflow-y-auto pr-4 flex flex-col gap-4 max-h-[60vh];
  }

  .profile-preview-container {
    @apply border-l border-border-color pl-8 flex flex-col;
  }

  .signature-preview {
    @apply flex-1 flex items-center justify-center bg-bg-primary border-2 border-dashed border-border-color rounded-md p-8 min-h-[300px];
  }

  .preview-empty {
    @apply text-text-secondary text-center text-sm;
  }

  .signature-preview-box {
    @apply bg-bg-secondary border border-accent-blue rounded px-4 py-3 font-mono text-[10px] leading-relaxed text-text-primary max-w-full break-words;
  }

  .signature-preview-box .preview-line {
    @apply my-1;
  }

  .signature-preview-box .preview-label {
    @apply text-text-secondary font-bold;
  }

  /* Signature Placement */
  .signature-placement-overlay {
    @apply fixed top-0 left-0 right-0 bottom-0 z-[10000];
    pointer-events: none;
    display: none;
  }

  .signature-placement-overlay:not(.hidden) {
    @apply block;
    pointer-events: all;
  }

  .placement-header {
    @apply fixed top-0 left-0 right-0 bg-bg-secondary border-b-2 border-accent-blue px-8 py-4 flex justify-between items-center z-[10001];
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  .placement-info h3 {
    @apply m-0 mb-1 text-text-primary text-xl;
  }

  .placement-info p {
    @apply m-0 text-text-secondary text-sm;
  }

  .placement-controls {
    @apply flex gap-3;
  }

  .signature-rectangle {
    @apply absolute border-2 border-dashed border-accent-blue cursor-move z-[10000];
    background-color: rgba(59, 130, 246, 0.1);
  }

  .signature-rectangle::before {
    content: 'âœŽ Signature';
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-accent-blue font-medium text-sm whitespace-nowrap;
    pointer-events: none;
  }

  .signature-rectangle::after {
    content: '';
    @apply absolute -bottom-1 -right-1 w-3 h-3 bg-accent-blue border-2 border-white rounded-full;
    cursor: nwse-resize;
  }

  .signature-rectangle.hidden {
    display: none;
  }

  /* Signature Info */
  .signature-info .signature-item {
    @apply p-3 bg-bg-tertiary rounded-md mb-3 border-l-[3px] border-border-color;
  }

  .signature-info .signature-item.valid {
    @apply border-l-accent-green;
  }

  .signature-info .signature-item.invalid {
    @apply border-l-red-500;
  }

  .signature-status {
    @apply flex items-center gap-2 mb-2;
  }

  .signature-status-badge {
    @apply px-2 py-0.5 rounded text-xs font-semibold uppercase;
  }

  .signature-status-badge.valid {
    @apply text-accent-green;
    background-color: rgba(16, 185, 129, 0.2);
  }

  .signature-status-badge.invalid {
    @apply text-red-500;
    background-color: rgba(239, 68, 68, 0.2);
  }

  .signature-detail {
    @apply mt-2 text-[0.8125rem];
  }

  .signature-detail-label {
    @apply text-text-secondary font-medium mr-1;
  }

  .signature-detail-value {
    @apply text-text-primary;
  }

  /* Message Dialog */
  .message-modal {
    @apply max-w-lg;
  }

  .message-content {
    @apply py-4 text-base leading-relaxed text-text-primary select-text cursor-text whitespace-pre-wrap break-words;
  }

  /* PDF Viewer */
  .pdf-viewer {
    flex: 1;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: auto;
    padding: 2rem;
    background-color: var(--bg-primary);
  }

  .pdf-viewer.scroll-mode {
    display: block;
    padding: 1rem;
    overflow-y: auto;
    overflow-x: auto;
    align-items: flex-start;
  }

  .pdf-page-container {
    margin: 0 auto;
    text-align: center;
    min-height: 100px;
    transform-origin: center center;
    transition: transform 0.2s;
  }

  .page-loading {
    padding: 2rem;
    color: var(--text-secondary);
    background-color: var(--bg-secondary);
    border: 1px dashed var(--border-color);
    border-radius: 0.5rem;
    margin: 1rem auto;
    max-width: 600px;
  }

  .page-error {
    padding: 2rem;
    color: #ef4444;
    background-color: var(--bg-secondary);
    border: 1px solid #ef4444;
    border-radius: 0.5rem;
    margin: 1rem auto;
    max-width: 600px;
  }

  .pdf-page {
    display: block;
    width: 100%;
    height: 100%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border-color);
    margin: 0 auto;
  }

  .pdf-viewer.scroll-mode .pdf-page-container {
    margin-bottom: 20px;
  }

  /* Welcome Screen */
  .welcome-screen {
    @apply flex items-center justify-center w-full h-full p-8;
  }

  .welcome-content {
    @apply flex flex-col items-center justify-center text-center max-w-7xl w-full;
  }

  .welcome-content h2 {
    @apply text-3xl font-bold mb-4;
  }

  .welcome-content p {
    @apply text-text-secondary mb-8 text-lg;
  }

  .recent-files-welcome {
    @apply mt-12 w-full;
  }

  .recent-files-welcome h3 {
    @apply text-xl font-semibold mb-6;
  }

  .recent-files-grid {
    @apply grid grid-cols-1 gap-4;
  }

  @media (min-width: 640px) {
    .recent-files-grid {
      @apply grid-cols-2;
    }
  }

  @media (min-width: 768px) {
    .recent-files-grid {
      @apply grid-cols-3;
    }
  }

  @media (min-width: 1024px) {
    .recent-files-grid {
      @apply grid-cols-4;
    }
  }

  @media (min-width: 1280px) {
    .recent-files-grid {
      @apply grid-cols-5;
    }
  }

  .recent-files-grid .empty-state {
    @apply col-span-full;
  }

  /* Empty State */
  .empty-state {
    @apply flex flex-col items-center justify-center py-8 text-text-secondary text-sm;
  }

  /* Features */
  .features {
    @apply grid grid-cols-3 gap-8 mt-12;
  }

  .feature {
    @apply p-6 bg-bg-secondary rounded-lg border border-border-color;
  }

  .feature .icon {
    @apply text-3xl block mb-3;
  }

  .feature h4 {
    @apply text-base mb-2;
  }

  .feature p {
    @apply text-sm text-text-secondary;
  }

  /* Visible Profile Settings */
  .visible-profile-settings.hidden {
    display: none !important;
  }

  #profileIconSettings.hidden {
    display: none !important;
  }

  #profilePositionSettings.hidden {
    display: none !important;
  }

  #messageDialog {
    z-index: 2000;
  }
}

@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
  }

  .scrollbar-thin::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-bg-primary;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-bg-tertiary rounded;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    @apply bg-hover-color;
  }

  /* Custom scrollbar for tabs */
  #pdfTabsContainer::-webkit-scrollbar {
    @apply h-1;
  }

  #pdfTabsContainer::-webkit-scrollbar-track {
    @apply bg-bg-secondary;
  }

  #pdfTabsContainer::-webkit-scrollbar-thumb {
    @apply bg-border-color rounded-sm;
  }

  #pdfTabsContainer::-webkit-scrollbar-thumb:hover {
    @apply bg-text-secondary;
  }
}